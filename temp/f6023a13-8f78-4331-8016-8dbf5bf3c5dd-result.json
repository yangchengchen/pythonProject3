{"name": "原霆科技后台管理", "status": "broken", "statusDetails": {"message": "TypeError: a bytes-like object is required, not 'dict'", "trace": "self = <ddt.yuanting_test.Test_Yuanting object at 0x1033ef0d0>\nlistcases = {'cases': [{'data': {'name': 'ycc000的出差申请', 'processDefinitionKey': 'trip_2000'}, 'method': 'post', 'name': '出差申请', 'u...'method': 'post', 'name': '车辆维修申请', 'url': 'oa/process/start'}], 'description': '原霆科技后台管理oa申请的用例', 'title': '原霆科技后台管理'}\n\n    @allure.story('申请OA')\n    @pytest.mark.parametrize('listcases', workflow()['workflow'])\n    def test_comm(self,listcases):\n        allure.dynamic.title(listcases['title'])\n        allure.dynamic.description(listcases['description'])\n        testcases = listcases['cases']\n        #print(testcases)\n        for cases in testcases:\n            listcase = list(cases.values())\n            #print(listcase)\n            url=listcase[3]\n            datas=listcase[2]\n            with allure.step(listcase[0]):\n                ree=keys.post(url,datas)\n                ree=ree.json()\n>               allure.attach(body=ree,name='返回参数',attachment_type=allure.attachment_type.TEXT)\n\nddt/yuanting_test.py:28: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../Library/Python/3.8/lib/python/site-packages/allure_commons/_allure.py:200: in __call__\n    plugin_manager.hook.attach_data(body=body, name=name, attachment_type=attachment_type, extension=extension)\n../../Library/Python/3.8/lib/python/site-packages/pluggy/_hooks.py:265: in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n../../Library/Python/3.8/lib/python/site-packages/pluggy/_manager.py:80: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n../../Library/Python/3.8/lib/python/site-packages/allure_pytest/listener.py:229: in attach_data\n    self.allure_logger.attach_data(uuid4(), body, name=name, attachment_type=attachment_type, extension=extension)\n../../Library/Python/3.8/lib/python/site-packages/allure_commons/reporter.py:165: in attach_data\n    plugin_manager.hook.report_attached_data(body=body, file_name=file_name)\n../../Library/Python/3.8/lib/python/site-packages/pluggy/_hooks.py:265: in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n../../Library/Python/3.8/lib/python/site-packages/pluggy/_manager.py:80: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <allure_commons.logger.AllureFileLogger object at 0x103266730>\nbody = {'code': 0, 'data': {'ended': False, 'historyList': [], 'id': '92909', 'name': 'ycc000的出差申请', ...}, 'msg': '成功'}\nfile_name = '59ba69f7-ca09-49c7-affd-a6bab0b56a09-attachment.txt'\n\n    @hookimpl\n    def report_attached_data(self, body, file_name):\n        destination = os.path.join(self._report_dir, file_name)\n        with open(destination, 'wb') as attached_file:\n            if isinstance(body, text_type):\n                attached_file.write(body.encode('utf-8'))\n            else:\n>               attached_file.write(body)\nE               TypeError: a bytes-like object is required, not 'dict'\n\n../../Library/Python/3.8/lib/python/site-packages/allure_commons/logger.py:62: TypeError"}, "description": "原霆科技后台管理oa申请的用例", "steps": [{"name": "出差申请", "status": "broken", "statusDetails": {"message": "TypeError: a bytes-like object is required, not 'dict'\n", "trace": "  File \"/Users/a00/PycharmProjects/pythonProject3/ddt/yuanting_test.py\", line 28, in test_comm\n    allure.attach(body=ree,name='返回参数',attachment_type=allure.attachment_type.TEXT)\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/allure_commons/_allure.py\", line 200, in __call__\n    plugin_manager.hook.attach_data(body=body, name=name, attachment_type=attachment_type, extension=extension)\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/pluggy/_hooks.py\", line 265, in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/pluggy/_manager.py\", line 80, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/pluggy/_callers.py\", line 60, in _multicall\n    return outcome.get_result()\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/pluggy/_result.py\", line 60, in get_result\n    raise ex[1].with_traceback(ex[2])\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/pluggy/_callers.py\", line 39, in _multicall\n    res = hook_impl.function(*args)\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/allure_pytest/listener.py\", line 229, in attach_data\n    self.allure_logger.attach_data(uuid4(), body, name=name, attachment_type=attachment_type, extension=extension)\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/allure_commons/reporter.py\", line 165, in attach_data\n    plugin_manager.hook.report_attached_data(body=body, file_name=file_name)\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/pluggy/_hooks.py\", line 265, in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/pluggy/_manager.py\", line 80, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/pluggy/_callers.py\", line 60, in _multicall\n    return outcome.get_result()\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/pluggy/_result.py\", line 60, in get_result\n    raise ex[1].with_traceback(ex[2])\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/pluggy/_callers.py\", line 39, in _multicall\n    res = hook_impl.function(*args)\n  File \"/Users/a00/Library/Python/3.8/lib/python/site-packages/allure_commons/logger.py\", line 62, in report_attached_data\n    attached_file.write(body)\n"}, "attachments": [{"name": "返回参数", "source": "59ba69f7-ca09-49c7-affd-a6bab0b56a09-attachment.txt", "type": "text/plain"}], "start": 1675405935645, "stop": 1675405936573}], "parameters": [{"name": "listcases", "value": "{'title': '原霆科技后台管理', 'description': '原霆科技后台管理oa申请的用例', 'cases': [{'name': '出差申请', 'method': 'post', 'data': {'name': 'ycc000的出差申请', 'processDefinitionKey': 'trip_2000'}, 'url': 'oa/process/start'}, {'name': '请假申请', 'method': 'post', 'data': {'name': 'ycc000的请假申请', 'processDefinitionKey': 'leave_1000'}, 'url': 'oa/process/start'}, {'name': '资中收文申请', 'method': 'post', 'data': {'name': 'ycc000的资中收文', 'processDefinitionKey': 'zzdoc_6000'}, 'url': 'oa/process/start'}, {'name': '资中用车申请', 'method': 'post', 'data': {'name': 'ycc000的资中用车', 'processDefinitionKey': 'use_car_zz_3001'}, 'url': 'oa/process/start'}, {'name': '用车申请', 'method': 'post', 'data': {'name': 'ycc000的用车', 'processDefinitionKey': 'use_car_3000'}, 'url': 'oa/process/start'}, {'name': '车辆维修申请', 'method': 'post', 'data': {'name': 'ycc000的车辆维修', 'processDefinitionKey': 'maintenance_4000'}, 'url': 'oa/process/start'}]}"}], "start": 1675405935645, "stop": 1675405936586, "uuid": "d522d1ea-0455-4db9-9312-4fb7f6fbbb85", "historyId": "05e1a9c6d79568ee17a7c0f41e6905ab", "testCaseId": "78cdb20a8f125f7b14364fa8276c6695", "fullName": "ddt.yuanting_test.Test_Yuanting#test_comm", "labels": [{"name": "story", "value": "申请OA"}, {"name": "parentSuite", "value": "ddt"}, {"name": "suite", "value": "yuanting_test"}, {"name": "subSuite", "value": "Test_Yuanting"}, {"name": "host", "value": "00demacbook-pro"}, {"name": "thread", "value": "76148-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "ddt.yuanting_test"}]}